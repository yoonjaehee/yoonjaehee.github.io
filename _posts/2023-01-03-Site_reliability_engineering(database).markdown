---
layout: post
title:  "2. monitoring in SRE environment"
date:   2023-01-03 11:11:54 +0900
categories: mysql
---
* 
  
1. **서비스 수준 목표의 정의** 
- SLI(서비스 수준 지표) : 사용자의 관점에서 건강한 시스템의 정도.(고객의 만족도를 어떻게 측정할까)
- SLO(서비스 수준 목표) : SLI가 정상적인 서비스로 간주 될 수 있게 하기 위한 목표 범위.(고객이 만족할 수 있게 SLI를 허용할 수 있는 최소 수준)
- SLA(서비스 수준 계약) : 하나 이상의 비즈니스 고객과의 계약에 포함된 SLO. SLA는 선택 사항임.  
#모든 기능이 고객의 만족을 유지하기 위해 높은 가용성을 요구하는 것이 아님 -> 특정 기능의 영향이나 그로 인한 수익에 따라 다양한 SLI와 SLO 갖게 됨. <br/>=> 데이터 세트가 서로 다른 이해 관계자에 의해 실행된 별개의 쿼리에서 병목 현상이 발생하여 성능이 저하되는 경우를 감지하는 것이 중요.<br/> => 합리적인 SLI와 SLO를 제시할 수 있도록 이해 관계자들의 요구를 분리하는 방법을 찾아야됨.  
    
2. **측정 대상**  
[1] 모니터링 솔루션 : 쿼리 분석 및 모니터링 쿼리 대기 시간은 고객 경험에 중점을 두어야한다. so, 쿼리 응답 시간이 합의된 임계값보다 길어지면 가능한 한 빨리 경고할 수 있는 도구에 의존해야 한다. -> 해당 수준의 모니터링을 달성하기 위한 여러가지 방법 소개.
- 상용 옵션 : mysql 성능을 프로파일링하는 특정 작업이 경쟁 우위인 벤더에게 비용을 지불하는 사례 중 하나.
- 오픈 소스 옵션 : 확실한 오프 소스 옵션 = PMM(Percona Monitoring and Management). 클라/서버 쌍으로 작동하며 매트릭을 수집하여 서버 부분으로 보내는 클라이언트를 DB instance 에 설치. -> 장점 : mysql 성능 모니터링에 대한 Percona 커뮤니티의 오랜 경험 바탕으로 대시보드 구성 가능.
[2] 가용성 모니터링 : 가용성은 오류 없이 고객 요청에 응답할 수 있어야 함. 
[3] 쿼리 지연 모니터링 : 
[4] 오류 모니터링 : 
[5] 사전 모니터링 : 
 - 디스크 증가 :
 - 연결 증가 : 
 - 복제 지연 :
 - I/O 활용 : 
 - 자동 증가 공간 : 
 - 백업 생성/복원 시간 : 
3. **장기적인 성능 측정**   
[1] 비즈니스 케이던스 배우기 : 
[2] 효과적인 메트릭 측정 : 
[3] 성능 점검을 위한 모니터링 도구 사용 :
 - 평균을 맹신하지 말자.
 - 백분위수는 우리에게 많은 도움을 준다
 - 긴 보존 기간 및 성능
[4] 전체 아키텍처링에 SLO 사용하기 